# CS 4100 Project 1

## How to run

```bash
./PlagiarismDetector.sh

# OR (since we should pass in an arg but it defaults to example)

./PlagiarismDetector.sh Examples
```

`make` and `make clean` are ran inside the PlagiarismDetector.sh and writes the scores to a file called PlagiarismReport.txt, it also removes the object files and temporary text files

make sure flex is install properly on your machine, here I used <b>@pu3</b>
aka the school prime machine

## CMOS.l

contains rules for tokenization, pretty much just grabs all required tokens for these bills_'xx'.c programs in ./Examples

## CMOS.cpp

`CMOS.cpp` is a C++ program that reads a file from standard input where each line is of the format:

- **`<filename>`** is the name of the original `.c` file (e.g., `bills_01.c`).
- **`<token_string>`** is a contiguous sequence of 3-digit tokens generated by a Lex scanner (e.g., `001002003033011004...`).

Once `CMOS.cpp` reads these lines, it performs the following operations:

1. **Parsing the Tokens**  
   The program uses `std::getline` to read each line and splits the line into two parts:  
   - The filename (e.g., `bills_01.c`)  
   - The token string (e.g., `001002003033...`)

2. **K-mer Generation**  
   The token string is split into **overlapping k‑mers**. The default `k` is 4, meaning substrings of length 4.  
   - For example, if your token string is `0010020030`, the 4-mers might be `0010`, `0100`, `1002`, `0020`, etc.

3. **Hashing**  
   Each k-mer is hashed using `std::hash<std::string>`. This converts the k-mer into a numeric value.

4. **Winnowing / Fingerprinting**  
   The program slides a window of width `W` (default 5) across the hashed k‑mers. For each window of size `W`, it takes the **minimum hash value** and stores it as a fingerprint. These fingerprints form a compressed representation of the submission.

5. **Storing the Results**  
   The filename and its fingerprints are saved in a structure called `Submission`.

6. **Comparing Submissions**  
   After reading all lines (submissions), the program compares the fingerprints between every pair of submissions using **Jaccard similarity**.
   
   where \(A\) and \(B\) are the sets of fingerprints for the respective submissions.

7. **Similarity Report**  
   The similarity scores are sorted from highest to lowest and then written to `PlagiarismReport.txt`. This allows you to see which pairs of submissions are most alike.

---

### Process Flow - Handled by PlagiarismDetector.sh

1. **Token Generation (Bash + Lex)**  
   - A Bash script invokes the Lex-generated scanner on each `.c` file.  
   - The output tokens are appended to a file `tokens.txt` in the format `<filename> <token_string>`.

2. **CMOS.cpp Execution**  
   - You run:  
     ```bash
     ./cmos < tokens.txt > PlagiarismReport.txt
     ```  
   - `CMOS.cpp` reads and processes each line’s tokens, computes k‑mers, hashes, and fingerprints.
   - Finally, it computes the similarity between all pairs of submissions and writes a sorted list of similarities to `PlagiarismReport.txt`.

---

### Configuration

- **`K` (k-mer size)**: Default is 4. You can adjust this to increase or reduce the granularity of matching.  
- **`W` (winnowing window size)**: Default is 5. Larger windows produce fewer fingerprints, while smaller windows produce more.

## Make

Makes our lexxer (cmos.l -> scanner) and makes our Winnoning Algo (cmos.cpp -> cmos) for our bash script (PlagiarismDetector.sh) 
</br>
</br>
<b>NOTE:</b> uses c++ 17 for file system library
